<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://vuejs.org/js/vue.min.js"></script>

    <script src="weather-data.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <style>
       .header{
           background-color: #1E96F2;
       }
        .main{
            background-color: white;
        }
       *,body,ul,li,h1,h2 {
           margin: 0;
           padding: 0;
           list-style: none;
       }
       body {
           font: 12px "宋体";
           padding-top: 20px;
       }
       #menu {
           margin: auto;
           position: absolute;
           left: 110px;
           top: 1px;
       }
       #menu h1 {
           cursor: pointer;
           color: #FFF;
           font-size: 12px;
           padding: 5px 0 3px 10px;
           margin-top: 1px;
       }
       #menu h2 {
           cursor: pointer;
           color: #FFF;
           font-size: 12px;
           padding: 5px 0 3px 10px;
           border-top-color: #FFF;
       }
       .no {
           display: none;
       }
    </style>
    <script>
        let i=0, j;
        let arr=weatherData.HeWeather;
    </script>
    <script>
        function ShowMenu(obj, noid) {
            var block = document.getElementById(noid);
            obj.style.color = "#0000FF";
            console.log(block.className );

            /*二级菜单显示 no  display:none*/
            if (block.className == "no") {
                block.className = "";
            } else {
                block.className = "no";
                obj.style.color = "";
            }
        }
    </script>
</head>
<body>
<div class="header">
    <div class="container" >
        <div class="row" style="color: white;
                display: flex;flex-direction: row;
                justify-content: space-between;background:#1E96F2; ">
            <div class="col-xs-6">
                <span style="font-size: 18px" id="local">北京</span>
                <span style="font-size: 18px;position: relative;left: -4px">天气</span>
                <div id="menu">
                    <h1 onClick="ShowMenu(this,'N00')">[切换]</h1>
                    <span id="N00" class="no"> </span>
                </div>
                <div id="big-pic"></div>
            </div>
            <div class="col-xs-6">
                <ul style="list-style: none;text-align: right; margin: 10px; " id="now">
                    <li id="cond"></li>
                    <li><i style="font-style: normal;font-size:40px;" id="min"></i>~
                        <i style="font-style: normal;font-size:40px;" id="max"></i>
                        <i style="font-style: normal;font-size:40px;">°C</i></li>
                    <li style="list-style: none;text-align: right;" id="tmp"></li>
                    <li id="windy"></li>
                    <li ><span class="bord" id="aqi"></span></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<h4>7日天气预报</h4>
<div class="main">
    <div class="container">
        <div class="column">
            <div class="row-xs-12" id="table" ></div>
        </div>
    </div>
</div>
<script>
    let getWeek=weatherData.HeWeather[0].daily_forecast;
    let $dayDiv;
    let $parent = $('#table');
    let $img;
    function change() {     main(0);        }
    window.onload=change();
    console.log(arr);
    function main(i) {
        $("#table").html("");      //document.getElementById("table").innerHTML="";
        let week=["今日","明日","周三","周四","周五","周六","周日"];
        for(let j=0;j<getWeek.length;j++){
            switch (j) {
                case 0:
                    $img = `<img src="32.png" style="height: 28px;">`;
                    break;
                case 1:
                    $img = `<img src="28.png" style="height: 28px;">`;
                    break;
                case 2:
                    $img = `<img src="37.png" style="height: 28px;">`;
                    break;
                case 3:
                    $img = `<img src="26.png" style="height: 28px;">`;
                    break;
                case 4:
                    $img = `<img src="32.png" style="height: 28px;">`;
                    break;
                case 5:
                    $img = `<img src="28.png" style="height: 28px;">`;
                    break;
                case 6:
                    $img = `<img src="28.png" style="height: 28px;">`;
                    break;
            }
            $dayDiv = `<div style="display: flex;flex-direction: row;justify-content: space-between;margin-top: 20px">
                      <span>${arr[i].daily_forecast[j].date.substring(5,7)}/${arr[i].daily_forecast[j].date.substring(8,10)}${week[j]}</span>
                      <span style="width: 100px">${$img}${arr[i].daily_forecast[j].cond.txt_d}</span>
                      <span><b style="color:green">${arr[i].daily_forecast[j].tmp.min}~</b >
                             <b style="color: gold">${arr[i].daily_forecast[j].tmp.max}℃</b></span></div>`;
            $parent.append($dayDiv);
        }
        switch (arr[i].daily_forecast[0].cond.code_n) {
            case '100':
                document.getElementById("big-pic").innerHTML=`<img src="32.png" style="width:123px">`;
                break;
            case '101':
                document.getElementById("big-pic").innerHTML=`<img src="28.png" style="width:123px">`;
                break;
            case '104':
                document.getElementById("big-pic").innerHTML=`<img src="26.png" style="width:123px">`;
                break;
            case '305':
                document.getElementById("big-pic").innerHTML=`<img src="64.png" style="width:123px">`;
                break;
            default:
                break;
        }
        console.log(i);

/*


        let $nowlocal;
        let $nowlocalparent = $('#now');
        for(let d=0;d<arr.length;d++){
            $nowlocal=`<li onclick="main(${c})">${allcity[c]}</li>`;
            $nowlocalparent.append($nowlocal);
        }
*/

        $("#local").html(arr[i].basic.city);
        $("#min").html(arr[i].daily_forecast[0].tmp.min);
        $("#max").html(arr[i].daily_forecast[0].tmp.max);
        $("#cond").html(arr[i].daily_forecast[0].cond.txt_d);
        $("#tmp").html(`<li style="list-style: none;text-align: right;">当前气温： ${arr[i].now.tmp} °C</li>`);
        $("#windy").html(`<li> ${arr[i].now.wind.dir} ${arr[i].now.wind.sc}级</li>`);
        $("#aqi").html(`<span class="bord">空气质量指数：${arr[i].aqi.city.aqi} ${arr[i].aqi.city.qlty}</span>`);


        /*document.getElementById("local").innerHTML=arr[i].basic.city;
        document.getElementById("min").innerHTML=arr[i].daily_forecast[0].tmp.min;
        document.getElementById("max").innerHTML=arr[i].daily_forecast[0].tmp.max;
        document.getElementById("cond").innerHTML=arr[i].daily_forecast[0].cond.txt_d;


        document.getElementById("tmp").innerHTML=`<li style="list-style: none;text-align: right;">当前气温： ${arr[i].now.tmp} °C</li>`;
        document.getElementById("windy").innerHTML=`<li> ${arr[i].now.wind.dir} ${arr[i].now.wind.sc}级</li>`;
        document.getElementById("aqi").innerHTML=`<span class="bord">空气质量指数：${arr[i].aqi.city.aqi} ${arr[i].aqi.city.qlty}</span>`;*/
        /*
      window.onload = function(){
          alert(2)
      };
      function noOnload(){
          alert(1)
      }
      noOnload();*/

    }
     /*  切换城市*/
    let allcity=[];
    let $h;
    let $hparent = $('#N00');
    for(let c=0;c<arr.length;c++){
        allcity[c]=arr[c].basic.city;
        $h=`<h2 onclick="main(${c})">${allcity[c]}</h2>`;
        $hparent.append($h);
    }
    console.log(allcity); /*  城市列表*/

   </script>
</body>
</html>